"use strict";(self.webpackChunkbifrost_frontend=self.webpackChunkbifrost_frontend||[]).push([[626],{9286:function(e,n,t){t.r(n),t.d(n,{InvitationsPage:function(){return Q},default:function(){return $}});var r=t(9439),i=t(2791),a=t(9230),s=t(8493),l=t(7621),o=t(9585),c=t(9504),u=t(8530),d=t(242),x=t(4512),h=t(5825),f=t(6151),m=t(890),p=t(2363),I=t(5380),v=t(24),Z=t(2649),N=t(1413),T=t(5705),j=t(6727),E=t(9012),O=t(5523),S=t(9955),_=t(8096),R=t(45),g=t(184),b=function(){var e=(0,i.useContext)(v.f),n=e.itemEdit,t=e.setItemEdit,r=e.setStepInv,s=e.stepInv,l=(0,a.$G)().t;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(T.J9,{initialValues:{firstName:null!==n?n.firstName:"",lastName:null!==n?n.lastName:"",nroId:null!==n?n.nroId:"",phone:null!==n?n.phone:""},onSubmit:function(e){t((0,N.Z)((0,N.Z)({},n),{},{firstName:e.firstName,lastName:e.lastName,nroId:e.nroId,phoneNumber:e.phone})),r((0,N.Z)((0,N.Z)({},s),{},{personalData:!0}))},validationSchema:(0,j.Ry)({firstName:(0,j.Z_)().min(4,"Debe tener al menos 4 caracteres").required(l("OUT.LOGIN.USERNAME_IS_REQUIRED")),lastName:(0,j.Z_)().required(l("OUT.LOGIN.EMAIL_REQUIRED")),nroId:(0,j.Rx)(),phone:(0,j.Z_)().required(l("OUT.LOGIN.EMAIL_REQUIRED"))}),children:function(e){return(0,g.jsxs)(T.l0,{className:"form_register",children:[(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"text",label:l("INVITATIONS_FORM.FIRSTNAME"),name:"firstName",size:"small",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"text",label:l("INVITATIONS_FORM.LASTNAME"),name:"lastName",size:"small",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"number",label:l("INVITATIONS_FORM.NROID"),name:"nroId",size:"small",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"text",label:l("INVITATIONS_FORM.PHONE_NUMBER"),name:"phone",size:"small",mask:"(0)999 999 99 99",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,sx:{display:"flex",justifyContent:"space-between"},children:(0,g.jsx)(E.Z,{children:(0,g.jsx)(O.Z,{sx:{marginLeft:"0"},control:(0,g.jsx)(S.Z,{size:"small",color:"primary",defaultChecked:!0}),label:(0,g.jsx)(m.Z,{style:{fontSize:".75rem"},children:l("INVITATIONS_FORM.FREQUENT_GUEST")})})})})]}),(0,g.jsx)("div",{className:"footer_login ",children:(0,g.jsx)(_.Z,{size:"small",fullWidth:!0,sx:{mt:1},variant:"outlined",children:(0,g.jsx)(f.Z,{type:"submit",variant:"contained",disabled:!e.isValid,children:l("OUT.REGISTER.NEXT")})})})]})}})})},C=function(){var e=(0,i.useContext)(v.f),n=e.itemEdit,t=e.setItemEdit,r=e.setStepInv,s=e.stepInv,l=e.setPrevStep,o=(0,a.$G)().t;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(T.J9,{initialValues:{vehicleModel:null!==n?n.vehicleModel:"",vehicleId:null!==n?n.vehicleId:"",vehicleColor:null!==n?n.vehicleColor:""},onSubmit:function(e){t((0,N.Z)((0,N.Z)({},n),{},{vehicleModel:e.vehicleModel,vehicleId:e.vehicleId,vehicleColor:e.vehicleColor})),r((0,N.Z)((0,N.Z)({},s),{},{vehicleData:!0}))},validationSchema:(0,j.Ry)({vehicleModel:(0,j.Z_)().min(3,"Debe tener al menos 3 caracteres"),vehicleId:(0,j.Z_)().min(4,"Debe tener al menos 4 caracteres"),vehicleColor:(0,j.Z_)().min(4,"Debe tener al menos 4 caracteres")}),children:function(e){return(0,g.jsxs)(T.l0,{className:"form_register",children:[(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"text",label:o("INVITATIONS_FORM.VEHICLE_MODEL"),name:"vehicleModel",size:"small",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"text",label:o("INVITATIONS_FORM.VEHICLE_ID"),name:"vehicleId",size:"small",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(T.gN,{component:R.n,type:"text",label:o("INVITATIONS_FORM.VEHICLE_COLOR"),name:"vehicleColor",size:"small",sx:{width:"100%",maxHeight:"60px"}})}),(0,g.jsx)(u.Z,{marginTop:2,sx:{display:"flex",justifyContent:"space-between"},children:(0,g.jsx)(E.Z,{children:(0,g.jsx)(O.Z,{sx:{marginLeft:"0"},control:(0,g.jsx)(S.Z,{size:"small",color:"primary"}),label:(0,g.jsx)(m.Z,{style:{fontSize:".75rem"},children:o("INVITATIONS_FORM.NO_INFORMATION")})})})})]}),(0,g.jsxs)("div",{className:"footer_stepper ",children:[(0,g.jsx)(_.Z,{size:"small",variant:"outlined",children:(0,g.jsx)(f.Z,{variant:"outlined",onClick:function(){return l(!0)},children:o("OUT.REGISTER.BACK")})}),(0,g.jsx)(_.Z,{size:"small",variant:"outlined",children:(0,g.jsx)(f.Z,{type:"submit",variant:"contained",disabled:!e.isValid,children:o("OUT.REGISTER.NEXT")})})]})]})}})})},A=t(4387),y=t(5574),M=t(5661),D=t(9157),L=t(7123),F=t(3006),w=t(8106),V=t(2353),z=t(5991),U=t(1652),G=t(2426),k=t.n(G),P=t(3577),H=t(240),W=t(8444),B=t(4181),q=t(7689),K=function(){var e=(0,i.useContext)(v.f),n=e.itemEdit,t=e.setItemEdit,s=e.setPrevStep,l=e.setStepInv,o=e.setInvitationSelected,c=e.setIsOpenInvitation,d=(0,a.$G)().t,x=(0,P.TL)(),h=(0,q.s0)(),p=(0,i.useState)(k()()),I=(0,r.Z)(p,2),Z=I[0],T=I[1],j=(0,i.useState)(k()().add(4,"hours")),E=(0,r.Z)(j,2),O=E[0],S=E[1],R=(0,i.useState)(""),b=(0,r.Z)(R,2),C=b[0],G=b[1],K=(0,P.CG)((function(e){return e.resident})),Q=K.condos,$=K.homes,J=K.infoResident,X=(0,i.useState)(null),Y=(0,r.Z)(X,2),ee=Y[0],ne=Y[1],te=(0,i.useState)(""),re=(0,r.Z)(te,2),ie=re[0],ae=re[1],se=(0,i.useState)(!1),le=(0,r.Z)(se,2),oe=le[0],ce=le[1],ue=function(){x((0,W.Wn)(n)).then((function(e){if(ce(!1),201===e.status){var n=new B.R;for(var r in n)n[r]=e.data[r];o(n),h("../home"),l({personalData:!1,vehicleData:!1,invData:!1}),t(null),setTimeout((function(){c(!0)}),500),ce(!1)}}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(_.Z,{fullWidth:!0,variant:"standard",children:(0,g.jsx)(F.Z,{id:"outlined-select-currency",select:!0,label:d("DICTIONARY.HOUSE"),size:"small",helperText:d("INVITATIONS_FORM.PLEASE_SELECT_HOME"),value:ee,onChange:function(e){return ne(e.target.value)},children:$.map((function(e){return(0,g.jsxs)(A.Z,{value:e.id,children:[e.numberHouse," ",e.description," - ",(0,H.j)(e.condo.name)]},e.id)}))})})}),(0,g.jsx)(U._,{dateAdapter:w.Q,children:(0,g.jsxs)(V.C,{components:["DateTimePicker","DateTimePicker"],children:[(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(_.Z,{fullWidth:!0,variant:"standard",children:(0,g.jsx)(z.x,{label:d("INVITATIONS_FORM.FROM_DATE"),value:Z,onChange:function(e){return T(e)}})})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(_.Z,{fullWidth:!0,variant:"standard",children:(0,g.jsx)(z.x,{label:d("INVITATIONS_FORM.TO_DATE"),value:O,onChange:function(e){return S(e)}})})})]})}),(0,g.jsx)(u.Z,{marginTop:2,children:(0,g.jsx)(_.Z,{fullWidth:!0,variant:"standard",children:(0,g.jsx)(F.Z,{id:"outlined-multiline-flexible",label:"Observations",multiline:!0,value:C,onChange:function(e){return G(e.target.value)},maxRows:8})})})]}),(0,g.jsxs)("div",{className:"footer_stepper ",children:[(0,g.jsx)(_.Z,{size:"small",variant:"outlined",children:(0,g.jsx)(f.Z,{variant:"outlined",onClick:function(){return s(!0)},children:d("OUT.REGISTER.BACK")})}),(0,g.jsx)(_.Z,{size:"small",variant:"outlined",children:(0,g.jsx)(f.Z,{variant:"contained",onClick:function(){var e=$.filter((function(e){return e.id===ee}))[0];t((0,N.Z)((0,N.Z)({},n),{},{fromDate:Z.format(),toDate:O.format(),homeId:e.id,houseNumber:e.numberHouse,date:Z.valueOf(),observation:C,residentId:J.id})),ae(Q.filter((function(n){return n.id===e.condo.id}))[0].name),ce(!0)},children:d("OUT.REGISTER.FINISH")})})]}),(0,g.jsxs)(y.Z,{open:oe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,g.jsx)(M.Z,{id:"alert-dialog-title",children:d("INVITATIONS_FORM.CREATE_INVITATION")}),(0,g.jsxs)(D.Z,{children:[(0,g.jsx)(m.Z,{sx:{fontSize:13},children:"Esta seguro que desea crear una invitation para:"}),(0,g.jsxs)(m.Z,{sx:{fontSize:14,fontWeight:"bold",letterSpacing:1},children:[(0,H.j)(n.firstName)," ",(0,H.j)(n.lastName)]}),(0,g.jsx)(m.Z,{sx:{fontSize:13},children:"Para la casa:"}),(0,g.jsxs)(m.Z,{sx:{fontSize:14,fontWeight:"bold",letterSpacing:1},children:[n.houseNumber," del condominio ",(0,H.j)(ie)]})]}),(0,g.jsxs)(L.Z,{children:[(0,g.jsx)(f.Z,{color:"secondary",onClick:function(){ce(!1)},children:d("GENERAL.CANCEL")}),(0,g.jsx)(f.Z,{onClick:function(){ue()},autoFocus:!0,children:d("GENERAL.CONFIRM")})]})]})]})},Q=function(){var e=(0,i.useContext)(v.f),n=e.prevStep,t=e.setPrevStep,N=e.stepInv,T=(0,a.$G)().t,j=(0,i.useState)(0),E=(0,r.Z)(j,2),O=E[0],S=E[1],_=(0,i.useState)({}),R=(0,r.Z)(_,2),A=R[0],y=R[1],M=["".concat(T("INVITATIONS_FORM.PERSONAL_INFORMATION")),"".concat(T("INVITATIONS_FORM.VEHICLE_DATA")),"".concat(T("INVITATIONS_FORM.INVITATION_DETAILS"))],D=function(){return M.length},L=function(){return Object.keys(A).length===D()},F=function(){var e=O!==D()-1||L()?O+1:M.findIndex((function(e,n){return!(n in A)}));S(e)};return(0,i.useEffect)((function(){!0!==N.personalData&&!0!==N.vehicleData&&!0!==N.invData||function(){var e=A;e[O]=!0,y(e),F()}()}),[N]),(0,i.useEffect)((function(){!0===n&&(S((function(e){return e-1})),t(!1))}),[n]),(0,g.jsx)(s.Z,{title:"Invitations",children:(0,g.jsxs)(l.Z,{variant:"outlined",className:"invitations",children:[(0,g.jsx)(o.Z,{sx:{p:0,borderBottom:"1px solid ".concat(I.Z.borderColor)},titleTypographyProps:{fontSize:"1.2rem"},title:T("GENERAL.GUEST")}),(0,g.jsxs)(c.Z,{className:"invitations_cardContainer",sx:{pt:1,pl:0,pr:0,height:"calc(75vh - 124px)"},children:[(0,g.jsxs)(u.Z,{sx:{width:"100%"},children:[(0,g.jsx)(d.Z,{nonLinear:!0,activeStep:O,alternativeLabel:!0,children:M.map((function(e,n){return(0,g.jsx)(x.Z,{completed:A[n],children:(0,g.jsx)(h.Z,{sx:{margin:0},children:e})},e)}))}),(0,g.jsx)("div",{children:L()?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:Z,alt:"success"})}),(0,g.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"row",pt:2},children:[(0,g.jsx)(u.Z,{sx:{flex:"1 1 auto"}}),(0,g.jsx)(f.Z,{onClick:function(){S(0),y({})},children:T("OUT.REGISTER.GO_TO_LOGIN")})]})]}):(0,g.jsxs)("div",{className:"card_container",children:[0===O&&(0,g.jsx)(b,{}),1===O&&(0,g.jsx)(C,{}),2===O&&(0,g.jsx)(K,{})]})})]}),(0,g.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"row",pt:2},children:[(0,g.jsx)(u.Z,{sx:{flex:"1 1 auto"}}),O===M.length&&(0,g.jsx)(m.Z,{variant:"caption",sx:{display:"inline-block"},children:T("OUT.REGISTER.COMPLETE_REGISTRATION_SUCCESSFULLY")})]})]}),(0,g.jsx)(p.Z,{sx:{display:"flex",justifyContent:"flex-end"}})]})})},$=Q},8493:function(e,n,t){var r=t(2791),i=t(1694),a=t.n(i),s=t(184),l=(0,r.forwardRef)((function(e,n){e.isProtected;var t=e.title,i=e.description,l=e.className,o=e.children;return(0,r.useLayoutEffect)((function(){var e;document.getElementsByTagName("TITLE")[0].text="".concat(t?"".concat(t," | "):""," Bifrost"),null===(e=document)||void 0===e||e.querySelector('meta[name="description"]').setAttribute("content",i||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_META_DESC||"")})),(0,s.jsx)("div",{ref:n,className:a()("page-wrapper","container-fluid","animate__animated","animate__fadeInRight","animate__faster",l),style:{display:"flex",flex:"1 0 auto",flexDirection:"column"},children:o})}));l.displayName="PageWrapper",l.defaultProps={isProtected:!0,title:void 0,description:void 0,className:void 0},n.Z=l},8444:function(e,n,t){t.d(n,{zO:function(){return f},Wn:function(){return x},O3:function(){return h}});var r=t(4165),i=t(5861),a=t(8018),s=t(9537),l=a.N.BASE_URL,o="".concat(l,"/invitations"),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o),e.abrupt("return",(0,s.z)().post(t,{data:n}).then((function(e){return e})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/validate/").concat(n),e.abrupt("return",(0,s.z)().get(t).then((function(e){return e})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/confirm-invitation"),e.abrupt("return",(0,s.z)().put(t,{data:n}).then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(e){return function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(e).then((function(e){return e}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},h=function(e){return function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u(e).then((function(e){return e}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},f=function(e){return function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(e).then((function(e){return e}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=Invitations.30543253.chunk.js.map